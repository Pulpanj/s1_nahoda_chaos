---
title: "N kostek a jejich souÄet"
format: html
# lang: en,cs
editor:
    render-on-save: false
---

*Ukradeno z vÃ½stupÅ¯ LLM Copilot*

**Jak dokÃ¡zat,Å¾e to konverguje k normÃ¡lnÃ­mu rozloÅ¾enÃ­ ??**

### Vzorec pro poÄet kombinacÃ­ vedoucÃ­ch k souÄtu $K$ pÅ™i hodu $N$ kostkami:

$$
\text{PoÄet kombinacÃ­} = \sum_{i=0}^{\left\lfloor \frac{K - N}{6} \right\rfloor} (-1)^i \binom{N}{i} \binom{K - 6i - 1}{N - 1}
$$

A pravdÄ›podobnost je pak:

$$
P(K) = \frac{1}{6^N} \sum_{i=0}^{\left\lfloor \frac{K - N}{6} \right\rfloor} (-1)^i \binom{N}{i} \binom{K - 6i - 1}{N - 1}
$$

---

### ğŸ” Co jednotlivÃ© ÄÃ¡sti znamenajÃ­:

- $\binom{N}{i}$: poÄet zpÅ¯sobÅ¯, jak vybrat $i$ kostek, kterÃ© â€pÅ™ekroÄÃ­â€œ maximÃ¡lnÃ­ hodnotu.
- $\binom{K - 6i - 1}{N - 1}$: poÄet zpÅ¯sobÅ¯, jak rozdÄ›lit souÄet mezi $N$ kostek s omezenÃ­m.
- $(-1)^i$: stÅ™Ã­dÃ¡nÃ­ znamÃ©nek kvÅ¯li inkluzi a exkluzi.
- $\left\lfloor \frac{K - N}{6} \right\rfloor$: maximÃ¡lnÃ­ poÄet â€pÅ™ekroÄenÃ­â€œ, kterÃ© je moÅ¾nÃ©.


---

```{python}

from math import comb, floor

def dice_sum_combinations(N, K):
    """
    VypoÄÃ­tÃ¡ poÄet kombinacÃ­ vedoucÃ­ch k souÄtu K pÅ™i hodu N Å¡estistÄ›nnÃ½mi kostkami
    pomocÃ­ principu inkluze a exkluze.

    Parametry:
    - N: poÄet kostek
    - K: poÅ¾adovanÃ½ souÄet

    NÃ¡vratovÃ¡ hodnota:
    - poÄet platnÃ½ch kombinacÃ­ (celÃ½ch ÄÃ­sel 1â€“6), kterÃ© dÃ¡vajÃ­ souÄet K
    """
    total = 0
    max_i = floor((K - N) / 6)
    for i in range(max_i + 1):
        sign = (-1) ** i
        term = comb(N, i) * comb(K - 6 * i - 1, N - 1)
        total += sign * term
    return total

# UkÃ¡zka pouÅ¾itÃ­: poÄet kombinacÃ­ pro 3 kostky a souÄet 12
N = 25
K = 120
result = dice_sum_combinations(N, K)
print(f"PoÄet kombinacÃ­ pro {N} kostky a souÄet {K} je: {result}")

```

```{python}
#| echo: false
import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
from IPython.display import Markdown

def df_dice_sum_combinations(N=5,print_table=False):
    # generuj graf pravdepodobnosti pro N kostek
    min_sum=N
    max_sum=N*6
    result=np.zeros(max_sum-min_sum+1)

    for K in range(min_sum,max_sum+1):
        # print(K,dice_sum_combinations(N, K))
        result[K-min_sum]=dice_sum_combinations(N, K)
    # display(result).markdown()

    scores_df = pd.DataFrame(result, columns=["PoÄet kombinacÃ­"]).reset_index(names='K')
    scores_df['K']=scores_df['K']+min_sum
    scores_df['PravdÄ›podobnost']=scores_df['PoÄet kombinacÃ­']/6**N
    if N<6 and print_table:
        display(scores_df.style.set_caption('PravdÄ›podobnost poÄtu kombinacÃ­ pro N='+str(N)))
        # Markdown(scores_df.to_html())
 
    return scores_df
df_dice_sum_combinations(3,print_table=True);
```


```{python}
import matplotlib.pyplot as plt

ncols=3
nrows=3
Nlist=[2,3,5,10,20,30,50,100,200]
fig = plt.figure(
    layout='constrained',
     figsize=(12, 10)
     )
for i in range(nrows):
    for j in range(ncols):
        N=Nlist[i*3+j]
        ax=plt.subplot2grid((nrows, ncols), (i, j))
        df=df_dice_sum_combinations(N)
        ax.bar(df['K'], df['PravdÄ›podobnost'], color='skyblue',label='N='+str(N))
        ax.legend()
        # ax.text(0.5, 0.5, "ax%d" % (i+1), va="center", ha="center")
        ax.tick_params(labelbottom=True, labelleft=True)

plt.show()
```
---

## ğŸ§  ZÃ¡kladnÃ­ princip inkluze a exkluze

Princip **inkluze a exkluze** je klasickÃ¡ technika v kombinatorice, kterÃ¡ se pouÅ¾Ã­vÃ¡ k **poÄÃ­tÃ¡nÃ­ poÄtu prvkÅ¯ v sjednocenÃ­ mnoÅ¾in**, kdyÅ¾ se nÄ›kterÃ© prvky mohou vyskytovat ve vÃ­ce mnoÅ¾inÃ¡ch zÃ¡roveÅˆ. V kontextu **poÄÃ­tÃ¡nÃ­ kombinacÃ­ souÄtÅ¯ kostek** se pouÅ¾Ã­vÃ¡ k **odstranÄ›nÃ­ neplatnÃ½ch kombinacÃ­**, kterÃ© pÅ™ekraÄujÃ­ maximÃ¡lnÃ­ hodnotu kostky.

PÅ™edstavme si dvÄ› mnoÅ¾iny:
- $A$: prvky splÅˆujÃ­cÃ­ podmÃ­nku 1
- $B$: prvky splÅˆujÃ­cÃ­ podmÃ­nku 2

Pak platÃ­:

$$
|A \cup B| = |A| + |B| - |A \cap B|
$$

Tedy:
- **Inkluze**: seÄteme vÅ¡echny jednotlivÃ© pÅ™Ã­pady.
- **Exkluze**: odeÄteme pÅ™Ã­pady, kterÃ© se poÄÃ­taly vÃ­cekrÃ¡t (napÅ™. jsou v obou mnoÅ¾inÃ¡ch).

---

## ğŸ“ Aplikace na souÄty kostek

PÅ™i vÃ½poÄtu poÄtu kombinacÃ­ souÄtu $K$ pÅ™i hodu $N$ kostkami, kde kaÅ¾dÃ¡ kostka mÃ¡ hodnotu 1â€“6, chceme spoÄÃ­tat poÄet celoÄÃ­selnÃ½ch Å™eÅ¡enÃ­ rovnice:

$$
x_1 + x_2 + \dots + x_N = K, \quad \text{kde } 1 \leq x_i \leq 6
$$

Ale bez omezenÃ­ by Å™eÅ¡enÃ­ zahrnovala i pÅ™Ã­pady, kde $x_i > 6$. Proto pouÅ¾ijeme **inkluzi a exkluzi**, abychom tyto neplatnÃ© pÅ™Ã­pady odeÄetli.

---

## ğŸ”¢ Jak to funguje ve vzorci

Vzorec:

$$
\sum_{i=0}^{\left\lfloor \frac{K - N}{6} \right\rfloor} (-1)^i \binom{N}{i} \binom{K - 6i - 1}{N - 1}
$$

- **Inkluze**: prvnÃ­ Älen (pro $i = 0$) zahrnuje vÅ¡echny kombinace bez omezenÃ­.
- **Exkluze**: dalÅ¡Ã­ Äleny (pro $i > 0$) odeÄÃ­tajÃ­ pÅ™Ã­pady, kde jedna nebo vÃ­ce kostek pÅ™ekroÄily hodnotu 6.
- **StÅ™Ã­dÃ¡nÃ­ znamÃ©nek**: zajiÅ¡Å¥uje sprÃ¡vnÃ© pÅ™iÄÃ­tÃ¡nÃ­ a odeÄÃ­tÃ¡nÃ­ pÅ™ekrÃ½vajÃ­cÃ­ch se pÅ™Ã­padÅ¯.
